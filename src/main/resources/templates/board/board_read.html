<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<th:block th:replace="header_footer/header :: headerFragment"></th:block>

<head>
  <meta charset="UTF-8" />
  <title>Title</title>
  <link
      href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@600&display=swap"
      rel="stylesheet"
  />
  <link href="/css/board/board_read.css" rel="stylesheet" />
  <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.10/dist/sweetalert2.min.css"
  />
  <link
      href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-bs4.min.css"
      rel="stylesheet"
  />
</head>

<body>
<div class="container" style="height: 1500px; width: 100%">
  <div class="chartjs-size-monitor">
    <div class="chartjs-size-monitor-expand">
      <div class=""></div>
    </div>
    <div class="chartjs-size-monitor-shrink"></div>
  </div>
  <div
      class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom top-border-bottom"
  >
    <h1 class="h2">FreeTalk</h1>
  </div>

  <div class="container p-4 content-container">
    <div
        class="row d-flex align-content-center p-4"
        style="width: 100%; height: 60px"
    >
      <h2 th:text="${board.title}" style="padding: 10px">제목</h2>
    </div>
    <div class="row" style="width: 100%; height: 30px; margin-bottom: 10px">
      <div
          class="col-1 d-flex justify-content-center"
          style="align-self: center"
      >
        <i class="bi bi-laptop" style="font-size: 1.5rem"></i>
      </div>
      <div
          class="col-3 d-flex"
          style="justify-content: flex-start; align-items: center"
      >
        <span th:text="${board.writer}">글쓴이</span>
      </div>
      <div
          class="col-4 d-flex"
          style="justify-content: flex-start; align-items: center"
      >
        <div class="col-12" style="border: none">
          <i class="bi bi-clock"></i>
          <th:block
              th:text="|&nbsp ${#dates.format(board.regDate, 'yyyy-MM-dd HH:mm')}|"
          ></th:block>
        </div>
      </div>
      <div
          class="col-3 d-flex"
          style="align-items: center; justify-content: flex-start"
      >
        <i class="bi bi-eye"></i>
        <th:block th:text="|&nbsp ${board.hits}|"></th:block>
      </div>
      <div
          class="col-1 d-flex"
          style="align-items: center; justify-content: center"
      >
        <i class="bi bi-hand-thumbs-up-fill"></i>
      </div>
    </div>
    <div class="row" style="width: 100%; height: auto; overflow: hidden">
      <div
          class="col-12 p-4"
          style="width: 100%; height: auto; text-align: justify; border: none"
          th:utext="${board.content}"
      ></div>
    </div>
    <!-- 첨부파일 공간 -->
    <div
        th:if="${board.oriName != null && board.storeName != null}"
        class="row"
        style="width: 100%; height: auto; overflow: hidden"
    >
      <div
          class="col-12 p-4 attachment-area"
          style="width: 100%; height: auto; text-align: justify; border: none"
      >
        <div id="attachments" style="margin-top: 10px">
          <!-- 예: 첨부파일 레이아웃 (실제로는 JavaScript 또는 서버 측 렌더링을 통해 동적으로 생성해야 합니다) -->
          <div class="attachment">
            <i class="bi bi-file-earmark-text"></i>
            <a th:href="|/board/download/${boardIdx}|">
              <th:block th:text="${board.oriName}"></th:block>
            </a>
          </div>
        </div>
      </div>
    </div>
    <div
        class="row d-flex"
        style="width: 100%; height: 40px; justify-content: flex-end"
    >
      <button
          type="button"
          th:if="${isLiked}"
          class="btn btn-primary liked"
          id="like-button"
      >
        <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            fill="currentColor"
            class="bi bi-hand-thumbs-up-fill"
            viewBox="0 0 16 16"
        ></svg>
        추천 취소
      </button>

      <button
          type="button"
          th:unless="${isLiked}"
          class="btn btn-primary"
          id="unlike-button"
      >
        <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            fill="currentColor"
            class="bi bi-hand-thumbs-up-fill"
            viewBox="0 0 16 16"
        ></svg>
        추천
      </button>
      <th:block th:if="|${session.vo.userIdx == board.userIdx}|">
        <!-- 수정 버튼 -->
        <button type="button" class="btn btn-success ml-2" id="edit_btn">
          <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              fill="currentColor"
              class="bi bi-pencil-fill"
              viewBox="0 0 16 16"
          >
            <path
                d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10Z"
            ></path>
          </svg>
          수정
        </button>
        <!-- 삭제 버튼 -->
        <button
            type="button"
            class="btn btn-danger ml-2"
            data-toggle="modal"
            data-target="#deleteModal"
        >
          <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              fill="currentColor"
              class="bi bi-trash-fill"
              viewBox="0 0 16 16"
          >
            <path
                d="M5.5 5.5a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0v-6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0v-6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0v-6a.5.5 0 0 1 .5-.5z"
            ></path>
            <path
                fill-rule="evenodd"
                d="M1 2a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2zm14 3a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h13z"
            ></path>
          </svg>
          삭제
        </button>
      </th:block>
    </div>
  </div>
  <!-- 댓글 -->
  <div class="comments-container">
    <h1>
      Comentarios
      <a href="http://creaticode.com">creaticode.com</a>
    </h1>
    <ul
        id="comments-list"
        class="comments-list"
        th:if="${commentList != null}"
    >
      <li>
        <th:block th:each="comment : ${commentList}">
          <div
              class="comment-main-level"
              th:if="${comment.commentLevel == 1}"
          >
            <!-- Avatar -->
            <div class="comment-avatar">
              <img
                  src="http://i9.photobucket.com/albums/a88/creaticode/avatar_1_zps8e1c80cd.jpg"
                  alt=""
              />
            </div>
            <!-- Contenedor del Comentario -->
            <div class="comment-box">
              <div class="comment-head">
                <h6 class="comment-name by-author">
                  <a
                      href="http://creaticode.com/blog"
                      th:text="${comment.commenter}"
                  >Agustin Ortiz</a
                  >
                </h6>
                <span
                    th:text="${#dates.format(comment.regDate, 'yyyy-MM-dd HH:mm')}"
                >hace 20 minutos</span
                >
                <i class="fa fa-reply reply_comment_btn"
                   th:data-idx="${comment.commentIdx}"
                   th:data-cl="${comment.commentLevel}"
                ></i>
                <i class="fa fa-heart"></i>
              </div>
              <div
                  class="comment-content"
                  th:utext="${comment.commentContent}"
              >
                Lorem ipsum dolor sit amet, consectetur adipisicing elit.
                Velit omnis animi et iure laudantium vitae, praesentium
                optio, sapiente distinctio illo?
              </div>
            </div>

            <div class="comment-area">
            </div>
          </div>
          <!-- 댓글 -->
          <div
              class="comment-second-level"
              th:if="${comment.commentLevel == 2}"
          >
            <ul class="comments-list reply-list">
              <li>
                <!-- Avatar -->
                <div class="comment-avatar">
                  <img
                      src="http://i9.photobucket.com/albums/a88/creaticode/avatar_1_zps8e1c80cd.jpg"
                      alt=""
                  />
                </div>
                <!-- Contenedor del Comentario -->
                <div class="comment-box">
                  <div class="comment-head">
                    <h6 class="comment-name by-author">
                      <a
                          href="http://creaticode.com/blog"
                          th:text="${comment.commenter}"
                      >Agustin Ortiz</a
                      >
                    </h6>
                    <span>hace 10 minutos</span>
                    <i class="fa fa-reply reply_comment_btn"
                       th:data-idx="${comment.commentIdx}"
                       th:data-cl="${comment.commentLevel}"
                    ></i>
                  </div>
                  <div
                      class="comment-content"
                      th:utext="${comment.commentContent}"
                  >
                    Lorem ipsum dolor sit amet, consectetur adipisicing
                    elit. Velit omnis animi et iure laudantium vitae,
                    praesentium optio, sapiente distinctio illo?
                  </div>
                </div>
              </li>
            </ul>
          </div>
          <div
              class="comment-third-level"
              th:if="${comment.commentLevel == 3}"
          >
            <ul class="comments-list reply-list reply-reply-list">
              <li>
                <!-- Avatar -->
                <div class="comment-avatar">
                  <img
                      src="http://i9.photobucket.com/albums/a88/creaticode/avatar_2_zps7de12f8b.jpg"
                      alt=""
                  />
                </div>
                <!-- Contenedor del Comentario -->
                <div class="comment-box">
                  <div class="comment-head">
                    <h6 class="comment-name">
                      <a
                          href="http://creaticode.com/blog"
                          th:text="${comment.commenter}"
                      >Lorena Rojero</a
                      >
                    </h6>
                    <span
                        th:text="${#dates.format(comment.regDate, 'yyyy-MM-dd HH:mm')}"
                    >hace 10 minutos</span
                    >
                    <i class="fa fa-reply reply_comment_btn"
                       th:data-idx="${comment.commentIdx}"
                       th:data-cl="${comment.commentLevel}"
                    ></i>
                  </div>
                  <div
                      class="comment-content"
                      th:utext="${comment.commentContent}"
                  >
                    Lorem ipsum dolor sit amet, consectetur adipisicing
                    elit. Velit omnis animi et iure laudantium vitae,
                    praesentium optio, sapiente distinctio illo?
                  </div>
                </div>

              </li>
            </ul>
          </div>
        </th:block>
      </li>
    </ul>
  </div>

  <div class="comment-reply-container-wrap">
    <div class="row comment-reply-container">
      <div
          class="row d-flex"
          style="justify-content: center"
      >

        <i class="bi bi-arrow-return-right"></i>&nbsp;&nbsp;
        <div id="summernote"></div>
      </div>
      <input
          type="hidden"
          id="boardIdx"
          th:value="${board.boardIdx}"
      />
      <div class="row">
        <button class="delete-button">
          <span class="delete-button-span">CONFIRM DELETE</span>
          <svg xmlns="http://www.w3.org/2000/svg" class="delete-button-svg" width="25" height="25"
               fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round"
                  d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
          </svg>
        </button>
      </div>
    </div>

  </div>
<!--  <div class="row comment-reply-container">
    <div
        class="row d-flex"
        style="justify-content: center"
    >
      <div id="summernote"></div>
    </div>
    <input
        type="hidden"
        id="boardIdx"
        th:value="${board.boardIdx}"
    />
  </div>
  <input type="hidden" class="commentIdx" th:value="0" />-->
</div>
<div
    class="modal fade"
    id="deleteModal"
    tabindex="-1"
    role="dialog"
    aria-labelledby="exampleModalLabel"
    aria-hidden="true"
>
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">게시물 삭제</h5>
        <button
            type="button"
            class="close"
            data-dismiss="modal"
            aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">게시물을 정말 삭제하시겠습니까?</div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" id="del_btn">
          삭제하기
        </button>
        <button
            type="button"
            class="btn btn-secondary"
            data-dismiss="modal"
        >
          취소하기
        </button>
      </div>
    </div>
  </div>
</div>
<th:block th:replace="header_footer/footer :: footerFragment" />
<script src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-bs4.min.js"></script>
<script th:inline="javascript">
  /*<![CDATA[*/
  let isLiked = /*[[${isLiked}]]*/ false;
  let currentUser = /*[[${session.vo.userId}]]*/ null;
  /*]]>*/

  console.log(currentUser);
</script>
<script
    src="https://kit.fontawesome.com/54a65148b8.js"
    crossorigin="anonymous"
></script>
<script type="text/javascript" src="/js/board/board_read.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.10/dist/sweetalert2.min.js"></script>
</body>
</html>

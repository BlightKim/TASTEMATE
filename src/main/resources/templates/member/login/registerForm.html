<!DOCTYPE html>
<html lagn="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<th:block th:replace="header_footer/header :: headerFragment"></th:block>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>회원가입 화면 샘플 - Bootstrap</title>

<!--    <link rel="stylesheet"-->
<!--          href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"-->
<!--          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"-->
<!--          crossorigin="anonymous">-->
    <link rel="stylesheet" href="sweetalert2.min.css">
    <style>
        body {
            min-height: 100vh;

            background: #E9DFED;
        }

        .input-form {
            max-width: 680px;

            margin-top: 80px;
            padding: 32px;

            background: #fff;
            -webkit-border-radius: 10px;
            -moz-border-radius: 10px;
            border-radius: 10px;
            -webkit-box-shadow: 0 8px 20px 0 rgba(0, 0, 0, 0.15);
            -moz-box-shadow: 0 8px 20px 0 rgba(0, 0, 0, 0.15);
            box-shadow: 0 8px 20px 0 rgba(0, 0, 0, 0.15)
        }

        #id_area {
            margin-bottom: 0;
        }
    </style>
</head>

<body>
<div class="container">
    <div class="row input-form-backgroud">
        <div class="col-md-12 mx-auto input-form">
            <h2 class="mb-3">회원가입</h2>
            <br>
            <form action="userJoin" method="post" onsubmit="return allCheck();" enctype="multipart/form-data">
                <div class="form-row">
                    <div class="col-md-6 mb-3" id="id_area">
                        <label for="userId">아이디</label>
                        <input id="userId" name="userId" class="form-control form-control" type="text"/>
                    </div>
                    <div class="col-md-6 mb-3" style="align-self: self-end;">
                        <button id="idCheckBtn" class="btn" type="button" value="N"
                                style="background: #8E48C7; color: white">중복확인
                        </button>
                    </div>
                    <div class="col-md-6 mb-3" style="text-align: center"><span id="id_warning" hidden="hidden"></span>
                    </div>

                </div>
                <div class="form-row">
                    <div class="col-md-6 mb-3"><label for="userPwd">비밀번호</label>
                        <input id="userPwd" name="userPwd" class="form-control form-control" type="password"
                               placeholder value required/>
                    </div>
                </div>
                <div class="row">
                    <div id="password1_warning" class="col-md-6 mb-3" style="text-align: center"><span></span>
                    </div>
                </div>
                <div class="form-row">
                    <div class="col-md-6 mb-3">
                        <label for="userPwd2">비밀번호 재확인</label>
                        <input id="userPwd2" class="form-control form-control" type="password" placeholder/>
                    </div>
                </div>
                <div class="row">
                    <div id="password2_warning" class="col-md-6 mb-3" style="text-align: center"><span></span>
                    </div>
                </div>
                <div class="form-row">
                    <div class="col-md-6 mb-3">
                        <label for="userName">이름</label>
                        <input id="userName" name="userName" class="form-control form-control" type="text"
                               placeholder/>
                    </div>
                </div>
                <div class="row">
                    <div id="userName_warning" class="col-md-6 mb-3" style="text-align: center" hidden="hidden">
                        <span></span>
                    </div>
                </div>
                <div class="form-row">
                    <div class="col-md-6 mb-3 cellPhone">
                        <label for="userPhone">전화번호</label>
                        <input id="userPhone" name="userPhone" class="form-control form-control" type="tel"
                               placeholder/>
                    </div>
                    <!--          <div class="col-md-6 mb-3 cerNum" hidden="hidden">-->
                    <!--            <label for="cerNum">전화번호</label>-->
                    <!--            <input id="cerNum" name="cerNum" class="form-control form-control" type="text" -->
                    <!--                   placeholder="인증번호를 입력해주세요."/>-->
                    <!--          </div>-->
                    <!--          <div class="col-md-6 mb-3 sendSms" style="align-self: self-end;" hidden="hidden">-->
                    <!--            <button id="phoneNum_certification" class="btn btn-primary" type="button">전화번호 인증</button>-->
                    <!--          </div>-->
                    <!--          <div class="col-md-6 mb-3 btn_cerNum" style="align-self: self-end;" hidden="hidden">-->
                    <!--            <button id="btn_certification" class="btn btn-primary" type="button">인증번호 입력</button>-->
                    <!--          </div>-->
                </div>
                <div class="row">
                    <div id="cellphone_warning" class="col-md-6 mb-3" style="text-align: center" hidden="hidden">
                        <span></span>

                    </div>
                    <div id="certification_warning" class="col-md-6 mb-3" style="text-align: center" hidden="hidden">
                        <span></span>
                    </div>
                </div>
                <div class="mb-3"><label>성별</label>
                    <div class="form-check">
                        <input name="userGender" id="man" class="form-check-input" type="radio" value="0"/>
                        <label class="form-check-label" for="man">남</label></div>
                    <div class="form-check">
                        <input name="userGender" id="woman" class="form-check-input" type="radio" value="1"/>
                        <label class="form-check-label" for="woman">여</label>
                    </div>
                    <div id="gender_warning" hidden="hidden"><span></span></div>
                </div>
                <div class="form-row">
                    <div class="col-md-6 mb-3" style="width: 50%;">
                        <label for="userEmail">이메일</label>
                        <input id="userEmail" name="userEmail" class="form-control form-control" type="email"
                               placeholder="you@example.com" required/>
                    </div>
                    <div class="row">
                        <div id="email_warning" class="col-md-6 mb-3" style="text-align: center" hidden="hidden">
                            <span></span>
                        </div>
                    </div>
                    <div class="col-md-6 mb-3" style="align-self: self-end; padding-left: 40px;">
                        <button class="btn btn-outline-primary" type="button" id="checkEmail">인증번호</button>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="emailconfirm" id="emailconfirmTxt">인증번호를 입력해주세요</label>
                        <input type="text" class="form-control" id="emailconfirm">
                    </div>
                </div>
                <div class="row">
                    <div id="auth_warning" class="col-md-6 mb-3" style="text-align: center" hidden="hidden">
                        <span></span>
                    </div>
                </div>
                <div class="form-row">
                    <div class="col-md-6 mb-3">
                        <label for="userLikeFood">음식을 선택해주세요</label>
                        <select class="form-control" id="userLikeFood" name="userLikeFood" onclick="foodChk=true"
                                th:value="${session.food}">
                            <option th:selected="${session.food == null}" value="" selected disabled>음식을 선택해주세요</option>
                            <option th:selected="${session.food == '한식'}" value="한식">한식</option>
                            <option th:selected="${session.food == '중식'}" value="중식">중식</option>
                            <option th:selected="${session.food == '일식'}" value="일식">일식</option>
                            <option th:selected="${session.food == '양식'}" value="양식">양식</option>
                            <option th:selected="${session.food == '퓨전'}" value="퓨전">퓨전</option>
                            <option th:selected="${session.food == '푸드코트'}" value="푸드코트">푸드코트</option>
                        </select>
                    </div>
                </div>
                <div class="row">
                    <div id="food_warning" class="col-md-6 mb-3" style="text-align: center" hidden="hidden">
                        <span></span>
                    </div>
                </div>
                <div class="form-row">
                    <div class="col-md-6 mb-3">
                        <label for="userClass">강의실을 선택해주세요</label>
                        <select class="form-control" id="userClass" name="userClass" onclick="classChk=true"
                                th:value="${session.userClass}">
                            <option th:selected="${session.userClass == null}" value="" selected disabled>강의실을 선택해주세요
                            </option>
                            <option th:selected="${session.userClass == 1}" value="1">1강의실</option>
                            <option th:selected="${session.userClass == 2}" value="2">2강의실</option>
                            <option th:selected="${session.userClass == 3}" value="3">3강의실</option>
                            <option th:selected="${session.userClass == 4}" value="4">4강의실</option>
                            <option th:selected="${session.userClass == 5}" value="5">5강의실</option>
                            <option th:selected="${session.userClass == 6}" value="6">6강의실</option>
                            <option th:selected="${session.userClass == 7}" value="7">7강의실</option>
                            <option th:selected="${session.userClass == 8}" value="8">8강의실</option>
                            <option th:selected="${session.userClass == 9}" value="9">9강의실</option>
                            <option th:selected="${session.userClass == 10}" value="10">10강의실</option>
                            <option th:selected="${session.userClass == 11}" value="11">11강의실</option>
                        </select>
                    </div>
                </div>
                <div class="row">
                    <div id="class_warning" class="col-md-6 mb-3" style="text-align: center" hidden="hidden">
                        <span></span>
                    </div>
                </div>
                <div class="form-row">
                    <div class="col-md-6 mb-3">
                        <label for="userMbti">MBTI를 선택해주세요</label>
                        <select class="form-control" id="userMbti" name="userMbti" onclick="mbtiChk=true"
                                th:value="${session.userMbti}">
                            <option th:selected="${session.userMbti == null}" value="" selected disabled>MBTI를 선택해주세요
                            </option>
                            <option th:selected="${session.userMbti == 'ISFP'}" value="ISFP">ISFP</option>
                            <option th:selected="${session.userMbti == 'ISFJ'}" value="ISFJ">ISFJ</option>
                            <option th:selected="${session.userMbti == 'ISTP'}" value="ISTP">ISTP</option>
                            <option th:selected="${session.userMbti == 'ISTJ'}" value="ISTJ">ISTJ</option>
                            <option th:selected="${session.userMbti == 'INFP'}" value="INFP">INFP</option>
                            <option th:selected="${session.userMbti == 'INFJ'}" value="INFJ">INFJ</option>
                            <option th:selected="${session.userMbti == 'INTP'}" value="INTP">INTP</option>
                            <option th:selected="${session.userMbti == 'INTJ'}" value="INTJ">INTJ</option>
                            <option th:selected="${session.userMbti == 'ESFP'}" value="ESFP">ESFP</option>
                            <option th:selected="${session.userMbti == 'ESFJ'}" value="ESFJ">ESFJ</option>
                            <option th:selected="${session.userMbti == 'ESTP'}" value="ESTP">ESTP</option>
                            <option th:selected="${session.userMbti == 'ESTJ'}" value="ESTJ">ESTJ</option>
                            <option th:selected="${session.userMbti == 'ENFP'}" value="ENFP">ENFP</option>
                            <option th:selected="${session.userMbti == 'ENFJ'}" value="ENFJ">ENFJ</option>
                            <option th:selected="${session.userMbti == 'ENTP'}" value="ENTP">ENTP</option>
                            <option th:selected="${session.userMbti == 'ENTJ'}" value="ENTJ">ENTJ</option>
                        </select>
                    </div>
                </div>
                <div class="row">
                    <div id="mbti_warning" class="col-md-6 mb-3" style="text-align: center" hidden="hidden">
                        <span></span>
                    </div>
                </div>
                <div class="form-row">
                    <div class="col-md-6 mb-3"><label>생년월일</label>
                        <div class="d-flex" id="userBirth" name="userBirth">
                            <select class="form-control" id="year" name="userBirth">
                            </select>
                            <select class="form-control" id="month" name="userBirth">
                            </select>
                            <select class="form-control" id="day" name="userBirth">
                            </select>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div id="birth-warning" class="col-md-6 mb-3" style="text-align: center" hidden="hidden">
                        <span></span>
                    </div>
                </div>

                <div class="mb-3">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                         class="bi bi-card-image" viewBox="0 0 16 16">
                        <path d="M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>
                        <path d="M1.5 2A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13zm13 1a.5.5 0 0 1 .5.5v6l-3.775-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12v.54A.505.505 0 0 1 1 12.5v-9a.5.5 0 0 1 .5-.5h13z"/>
                    </svg>
                    <label for="oriFilename">프로필 사진</label>
                    <input type="file" class="form-control" id="oriFilename" name="oriFilename"
                           accept="image/png, image/gif, image/jpeg, image/jpg" multiple="multiple">
                </div>

                <div class="mb-3">
                    <label for="userPost">우편번호</label>
                    <input id="userPost" name="userAddress" class="form-control form-control" type="text"
                           placeholder="우편번호"/>
                </div>
                <div class="form-row">
                    <div class="col-md-6 mb-3">
                        <label for="userAddr">주소</label>
                        <input id="userAddr" name="userAddress" class="form-control form-control" type="text"
                               placeholder value/>
                    </div>
                </div>
                <div class="mb-3">
                    <label>상세주소<span class="text-muted"></span></label>
                    <input id="userAddrDetail" class="form-control form-control" type="text" name="userAddress"
                           placeholder="상세주소를 입력해주세요."/>
                </div>
                <div class="email_warning" id="address_warning" hidden="hidden"><span></span></div>
                <hr class="mb-4"/>
                <div class="custom-control custom-checkbox">
                    <input id="gether_agree" name="gether_agree" class="custom-control-input"
                           type="checkbox" required/>
                    <label class="custom-control-label" for="gether_agree">개인정보 수집 및 이용에 동의합니다.</label>
                </div>
                <div class="mb-4"></div>
                <button class="btn btn-block btn-lg" type="submit" id="submit_btn"
                        style="background: #8E48C7; color: white">가입 완료
                </button>
            </form>
        </div>
    </div>
    <footer class="text-center my-3 text-small">
        <p class="mb-1">© 2023 TASTEMATE</p>
    </footer>
</div>
<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
<th:block th:replace="header_footer/footer :: footerFragment"></th:block>
<script>
    //각 입력값들의 유효성 검증을 위한 정규표현식을 변수로 선언.
    // [허용문자], {최소문자길이, 최대 문자길이}
    const idRegExp = RegExp(/^[a-zA-Z0-9]{4,14}$/);

    // 숫자가 먼저오고 뒤에 특수문자가 옴 or 특수문자가 먼저오고 숫자가 옴 2가지 방법으로 제약 사항 설정
    const pwdRegExp = RegExp(
        /([a-zA-Z0-9].*[!,@,#,$,%,^,&,*,?,_,~])|([!,@,#,$,%,^,&,*,?,_,~].*[a-zA-Z0-9])/);

    // 한글만 허용
    const nameRegExp = RegExp(/^[가-힣]+$/);

    const cellPhoneRegExp = RegExp(/^01([0|1|6|7|8|9])-?([0-9]{3,4})-?([0-9]{4})$/);

    // 계정@도메인.최상위도메인' 형식의 데이터를 찾는 정규표현식
    const emailRegExp = RegExp(/^[a-zA-Z0-9+-\_.]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/);

    let idChk = false, pwd1Chk = false, pwd2Chk = false, nameChk = false, cellphoneChk = false,
        genderChk = false, emailChk = false, birthChk = false, classChk = false, addressChk = false,
        getherChk = false, foodChk = false, mbtiChk = false, emconfirmchk = false;

    let timer = null;
    let isRunning = false;

    $(document).ready(() => {
        setDateBox();

        $("#idCheckBtn").click(fn_checkId);
        $("#userId").keyup(() => {
            idChk = false;
        });

        $('#userPwd').change(check_pwd1);
        $('#userPwd').keyup(check_pwd1);

        $('#userPwd2').change(check_pwd2);
        $('#userPwd2').keyup(check_pwd2);

        $('#userName').keyup(check_userName);

        $('#userPhone').keyup(check_cellphone);

        $('input[name=userGender]').click(() => {
            genderChk = true;
        });
        $('#userEmail').change(check_email);

        $('#year,#month,#day').change(check_date);

        if ($('#userClass').val() != null) {
            check_class();
        }
        $('#userClass').click(check_class);
        console.log($('#userClass').val());

        if ($('#userLikeFood').val() != null) {
            check_food();
        }
        $('#userLikeFood').click(check_food);
        console.log($('#userLikeFood').val());
        if ($('#userMbti').val() != null) {
            check_mbti();
        }
        $('#userMbti').click(check_mbti);
        console.log($('#userMbti').val());

        $('#userPost, #userAddr').click(findArr);

        $('#userPost, #userAddr, #userAddrDetail').change(checkAddr);

        // $('#phoneNum_certification').click(sendSms)

        $('#gether_agree').change(() => {
            if ($('#gether_agree').is(':checked')) {
                getherChk = true;
                $('#submit_btn').attr('disabled', false);
            } else {
                $('#submit_btn').attr('disabled', true);
                getherChk = false;
            }
        });

        $("#checkEmail").click(sendEmail);


        function setDateBox() {
            let dt = new Date();
            let month = dt.getMonth();

            $("#year").append("<option value=''>년</option>");
            for (let i = dt.getFullYear(); i >= dt.getFullYear() - 120; i--) {
                $("#year").append("<option value='" + i + "'>" + i + " 년" + "</option>");
            }

            $("#month").append("<option value=''>월</option>");
            for (let i = 1; i <= 12; i++) {
                $("#month").append("<option value='" + i + "'>" + i + " 월" + "</option>");
            }

            $("#day").append("<option value=''>일</option>");

            $("#month").change(() => {
                $("#day").empty();

                let dt = new Date();
                let month = $("#month").val();
                let year = $('#year').val();

                let lastDate = new Date(year, month, 0).getDate();

                for (let i = 1; i <= lastDate; i++) {
                    $("#day").append("<option value='" + i + "'>" + i + " 일" + "</option>");
                }
                console.log(lastDate);

                lastDate = 0;

                console.log(lastDate);
            });
        }

        function sendEmail() {
            $.ajax({
                type : "POST",
                url : "/member/mailConfirm",
                data : {
                    "email" : $('#userEmail').val()
                },
                success : function(data){
                    Swal.fire({
                        icon: 'success',
                        title: '인증번호 전송완료',
                        text: '이메일로 전송된 인증번호를 입력해주세요.',
                    })
                    console.log("data : "+data);
                    chkEmailConfirm(data);
                }
            })
        }

        // 이메일 인증번호 체크 함수
        function chkEmailConfirm(data) {
            $('#emailconfirm').on("keyup", function(){
                if (data != $('#emailconfirm').val()) { //
                    emconfirmchk = false;
                    $('#auth_warning').removeAttr('hidden');
                    $('#auth_warning').html('<b style="font-size: 14px; color: red">[인증번호가 잘못되었습니다.]</b>');
                    // $('#emailconfirmTxt').html("<span id='memconfirmchk'>인증번호가 잘못되었습니다</span>")
                    // $("#memconfirmchk").css({
                    //     "color" : "#FA3E3E",
                    //     "font-weight" : "bold",
                    //     "font-size" : "18px"
                    //
                    // })

                    //console.log("중복아이디");
                } else { // 아니면 중복아님
                    emconfirmchk = true;
                    $('#auth_warning').removeAttr('hidden');
                    $('#auth_warning').html('<b style="font-size: 14px; color: blue">[인증번호가 일치합니다.]</b>');
                }
            })
        }


        function check_id() {
            // if ($("#userId").val() === '') {
            //   $('#id_warning').removeAttr('hidden');
            //   $('#id_warning').html('<b style="font-size: 14px; color:red">[아이디는 필수 정보입니다.]</b>');
            //
            //   idChk = false;
            // } else if (!idRegExp.test($("#userId").val())) {
            //   $('#id_warning').removeAttr('hidden');
            //   $('#id_warning').html(
            //           '<b style="font-size: 14px; color: red">[영문과 숫자 조합으로 4~14자 조합해주세요.]</b>')
            //
            //   idChk = false;
            // } else {
            //   $('#id_warning').removeAttr("hidden");
            //   $('#id_warning').html(
            //           '<b style="font-size: 14px; color: blue">[사용 가능합니다.]</b>');
            //   idChk = true;
            //   const checkId = $("#userId").val();
            //
            //   $.ajax({
            //     type: 'POST',
            //     url: '/register/checkId',
            //     header: {
            //       'Content-Type': 'application/json'
            //     },
            //     dataType: 'text', // 서버로 부터 응답받을 데이터의 형태
            //     data: {checkId: checkId}, // 사용자가 입력한 id 데이터를 서버로 전송
            //     success: (data) => {
            //
            //       if (data > 0) {
            //         $('#id_warning').removeAttr("hidden");
            //         $('#id_warning').html(
            //                 '<b style="font-size: 14px; color: blue">[사용 가능합니다.]</b>');
            //
            //         idChk = true;
            //       } else {
            //         $('#id_warning').html('<b style="font-size: 14px; color: red">[아이디가 중복되었습니다.]</b>');
            //         idChk = false;
            //       }
            //     },
            //     error: (status, error) => {
            //       console.log('통신 실패');
            //       console.log(status, error);
            //     }
            //   });
            // }
        }

        console.log(fn_checkId)

        function fn_checkId() {
            if ($("#userId").val() === '') {
                $('#id_warning').removeAttr('hidden');
                $('#id_warning').html('<b style="font-size: 14px; color:red">[아이디는 필수 정보입니다.]</b>');

                idChk = false;
            } else if (!idRegExp.test($("#userId").val())) {
                $('#id_warning').removeAttr('hidden');
                $('#id_warning').html('<b style="font-size: 14px; color: red">[영문또는 숫자 4~14자로 사용해주세요.]</b>')
            } else if (!idRegExp.test($("#userId").val())) {
                $('#id_warning').removeAttr('hidden');
                $('#id_warning').html('<b style="font-size: 14px; color: red">[영문또는 숫자 4~14자로 사용해주세요.]</b>')
                idChk = false;
            } else {
                $('#id_warning').removeAttr("hidden");
                $('#id_warning').html('<b style="font-size: 14px; color: blue">[사용 가능합니다.]</b>');
                idChk = true;
                const checkId = $("#userId").val();

                $.ajax({
                    url: "/member/checkId",
                    type: "post",
                    dataType: "json",
                    headers: {
                        'Content-Type': "text/plain",
                    },
                    data: checkId,
                    success: function (data) {
                        console.log(data)
                        if (data.check == 1) {
                            console.log('중복')
                            $('#id_warning').removeAttr('hidden');
                            $('#id_warning').html('<b style="font-size: 14px; color: red">[아이디가 중복되었습니다.]</b>');
                            idChk = false;
                        } else if (data.check == 0) {
                            $("#idChk").attr("value", "Y");
                            $('#id_warning').html('<b style="font-size: 14px; color: blue">[사용 가능합니다.]</b>');
                            idChk = true;
                        }
                    }
                })
            }
        }

        function check_pwd1() {
            if ($('#userPwd').val() === '') {
                $('#password1_warning').removeAttr('hidden', 'hidden');
                $('#password1_warning').html('<b style="font-size: 14px; color:red">[비밀번호는 필수 정보입니다.]</b>');
                pwd1Chk = false;
            } else if (!pwdRegExp.test($('#userPwd').val()) || $('#userPwd').val().length < 8) {
                $('#password1_warning').removeAttr('hidden');
                $('#password1_warning').html(
                    '<b style="font-size: 14px; color:red">[비밀번호는 특수문자 포함 8자 이상입니다.]</b>');
                pwd1Chk = false;
            } else {
                $('#password1_warning').attr('hidden', 'hidden');
                pwd1Chk = true;
            }
        }

        function check_pwd2() {
            if ($('#userPwd2').val() === '') {
                $('#password2_warning').removeAttr('hidden', 'hidden');
                $('#password2_warning').html('<b style="font-size: 14px; color:red">[비밀번호는 필수 정보입니다.]</b>');
                pwd2Chk = false;
            } else if ($('#userPwd2').val() !== $('#userPwd').val()) {
                $('#password2_warning').removeAttr('hidden', 'hidden');
                $('#password2_warning').html(
                    '<b style="font-size: 14px; color:red">[입력한 비밀번호가 일치하지 않습니다.]</b>');
            } else {
                $('#password2_warning').attr('hidden', 'hidden');
                pwd2Chk = true;
            }
        }

        function check_userName() {
            console.log($('#userName').val());
            if ($('#userName').val() === '') {
                $('#userName_warning').removeAttr('hidden', 'hidden');
                $('#userName_warning').html('<b style="font-size: 14px; color:red">[이름은 필수 정보입니다.]</b>');
            } else if (!nameRegExp.test($('#userName').val())) {
                $('#userName_warning').removeAttr('hidden', 'hidden');
                $('#userName_warning').html('<b style="font-size: 14px; color:red">[한글 이름을 입력해주세요.]</b>');
            } else {
                $('#userName_warning').attr('hidden', 'hidden');
                nameChk = true;
            }
        }

        function check_cellphone() {
            if ($('#userPhone').val() === '') {
                $('#cellphone_warning').removeAttr('hidden', 'hidden');
                $('#cellphone_warning').html('<b style="font-size: 14px; color:red">[휴대전화는 필수 정보입니다.]</b>');
                cellphoneChk = false;
                $('.sendSms').attr('hidden', 'hidden');
            } else if (!cellPhoneRegExp.test($("#userPhone").val())) {
                $('#cellphone_warning').removeAttr('hidden', 'hidden');
                $('#cellphone_warning').html(
                    '<b style="font-size: 14px; color: red">[올바른 형식의 휴대폰 번호를 입력해주세요.]</b>')
                let text = $('#userPhone').val();
                text = text.replace(/[^0-9]/g, '').replace(/^(\d{0,3})(\d{0,4})(\d{0,4})$/g,
                    "$1-$2-$3").replace(/(\-{1,2})$/g, "");
                $('#userPhone').val(text);
                cellphoneChk = false;
                // $('.sendSms').attr('hidden', 'hidden');
            } else {
                $('#cellphone_warning').attr('hidden', 'hidden');
                // $('.sendSms').removeAttr('hidden');
                cellphoneChk = true;
            }
        }

        function check_email() {
            if ($('#userEmail').val() === '') {
                $('#email_warning').removeAttr('hidden', 'hidden');
                $('#email_warning').html('<b style="font-size: 14px; color:red">[이메일은 필수 정보입니다.]</b>');
                emailChk = false;
            } else if (!emailRegExp.test($("#userEmail").val())) {
                $('#email_warning').removeAttr('hidden', 'hidden');
                $('#email_warning').html(
                    '<b style="font-size: 14px; color: red">[올바른 형식의 이메일을 입력해주세요.]</b>')
                emailChk = false;
            } else {
                $('#email_warning').attr('hidden', 'hidden');
                emailChk = true;
            }
        }

        function check_date() {
            if ($('#year').val() === '') {
                $('#birth-warning').removeAttr('hidden', 'hidden');
                $('#birth-warning').html('<b style="font-size: 14px; color:red">[태어난 년도를 선택해주세요.]</b>');
                birthChk = false;
            } else if ($('#month').val() === '') {
                $('#birth-warning').removeAttr('hidden', 'hidden');
                $('#birth-warning').html('<b style="font-size: 14px; color:red">[태어난 월을 선택해주세요.]</b>');
                birthChk = false;
            } else if ($('#day').val() === '') {
                $('#birth-warning').html('<b style="font-size: 14px; color:red">[태어난 날짜를 선택해주세요.]</b>');
                $('#birth-warning').removeAttr('hidden', 'hidden');
                birthChk = false;
            } else {
                $('#birth-warning').attr('hidden', 'hidden');

                birthChk = true;
            }
        }

        function check_class() { // 수정해야함 <- 유효성 안먹힘
            if ($('#userClass').val() === '') {
                $('#class_warning').removeAttr('hidden', 'hidden');
                $('#class_warning').html('<b style="font-size: 14px; color:red">[강의실을 선택해주세요]</b>');
                classChk = false;
            } else {
                $('#class_warning').attr('hidden', 'hidden');
                classChk = true;
            }
        }

        function check_food() { // 수정해야함 <- 유효성 안먹힘
            if ($('#userLikeFood').val() === '') {
                console.log($('#userLikeFood').val());
                $('#food_warning').removeAttr('hidden', 'hidden');
                $('#food_warning').html('<b style="font-size: 14px; color:red">[음식을 선택해주세요]</b>');
                foodChk = false;
            } else {
                $('#food_warning').attr('hidden', 'hidden');
                foodChk = true;
            }
        }

        function check_mbti() { // 수정해야함 <- 유효성 안먹힘
            if ($('#userMbti').val() === '') {
                console.log($('#userMbti'));
                $('#mbti_warning').removeAttr('hidden', 'hidden');
                $('#mbti_warning').html('<b style="font-size: 14px; color:red">[MBTI를 선택해주세요]</b>');
                mbtiChk = false;
            } else {
                $('#mbti_warning').attr('hidden', 'hidden');
                mbtiChk = true;
            }
        }

        function findArr() {
            new daum.Postcode({
                oncomplete: function (data) {
                    console.log(data);
                    // 팝업에서 검색결과 항목을 클릭했을때 실행할 코드를 작성하는 부분.
                    // 도로명 주소의 노출 규칙에 따라 주소를 표시한다.
                    // 내려오는 변수가 값이 없는 경우엔 공백('')값을 가지므로, 이를 참고하여 분기 한다.
                    var roadAddr = data.roadAddress; // 도로명 주소 변수
                    var jibunAddr = data.jibunAddress; // 지번 주소 변수
                    // 우편번호와 주소 정보를 해당 필드에 넣는다.
                    document.getElementById('userPost').value = data.zonecode;
                    if (roadAddr !== '') {
                        document.getElementById("userAddr").value = roadAddr;
                    } else if (jibunAddr !== '') {
                        document.getElementById("userAddrDetail").value = jibunAddr;
                    }
                }
            }).open();
        }

        function checkAddr() {
            if ($('#userPost').val() === '') {
                $('#address_warning').html('<b style="font-size: 14px; color:red">[주소는 필수항목입니다.]</b>');
                addressChk = false;
            } else if ($('#userAddr').val() === '') {
                $('#address_warning').html('<b style="font-size: 14px; color:red">[주소는 필수항목입니다.]</b>');
                addressChk = false;
            } else if ($('#userAddrDetail').val() === '') {
                $('#address_warning').html('<b style="font-size: 14px; color:red">[주소는 필수항목입니다.]</b>');
                addressChk = false;
            } else {
                $('#address_warning').attr('hidden', 'hidden');
                addressChk = true;
            }
        }

        // 타이머 시작
        // function startTimer(count, display) {
        //   let minutes, seconds;
        //
        //   timer = setInterval(function() {
        //     minutes = parseInt(count / 60, 10);
        //     seconds = parseInt(count % 60, 10);
        //
        //     minutes = minutes < 10 ? "0" + minutes : minutes;
        //     seconds = seconds < 10 ? "0" + seconds : seconds;
        //
        //
        //     $('#certification_warning').html('<b style="font-size: 14px; color:red">' + minutes + ":" + seconds + '</b>');
        //
        //
        //     if(--count < 0) {
        //       clearInterval(timer);
        //       alert('시간초과');
        //       $("#btn_certification").attr("disabled", true);
        //       isRunning(false);
        //     }
        //   }, 1000);
        //   isRunning = true;
        // } // 타이머

        //핸드폰 인증 문자 보내기
        //
        //   function sendSms() {
        //     const phoneNumber = $('#cellphone').val().replaceAll('-', '');
        //
        //     $.ajax({
        //       type: 'POST',
        //       url: '/check/sendSMS',
        //       header: {
        //         'Content-Type': 'application/json'
        //       },
        //       dataType: 'application/json', // 서버로 부터 응답받을 데이터의 형태
        //       data: JSON.stringify(
        //           {phoneNumber: phoneNumber}
        //       ), // 사용자가 입력한 id 데이터를 서버로 전송
        //       success: (data) => {
        //
        //         console.log(data);
        //         $('.cellPhone').attr('hidden', 'hidden');
        //         $('.cerNum').removeAttr('hidden');
        //         $('.sendSms').attr('hidden', 'hidden');
        //         $('.btn_cerNum').removeAttr('hidden');
        //
        //         let display = $('#certification_warning');
        //         let leftSec = 180;
        //
        //         if(isRunning) {
        //         } else {
        //           startTimer(leftSec, display);
        //           $('#certification_warning').removeAttr('hidden');
        //         }
        //
        //       },
        //       error: (status, error) => {
        //         console.log('통신 실패');
        //         console.log(status, error);
        //       }
        //     });
        //   }

    })

    function allCheck() {
        if (idChk === false) {
            alert('아이디를 확인해주세요.');
            return false;
        }
        if (pwd1Chk === false) {
            alert('비밀번호를 입력해주세요.');
            return false;
        }
        if (pwd2Chk === false) {
            alert('재확인 비밀번호를 입력해주세요.');
            return false;
        }
        if (nameChk === false) {
            alert('이름을 입력해주세요.');
            return false;
        }
        if (cellphoneChk === false) {
            alert('올바른 형식의 전화번호를 입력해주세요.');
            return false;
        }

        if (genderChk === false) {
            alert('성별을 선택해주세요.');
            return false;
        }

        if (emailChk === false) {
            alert('이메일을 입력해주세요.');
            return false;
        }

        if (foodChk === false) {
            alert('음식을 입력해주세요.');
            return false;
        }

        if (classChk === false) {
            alert('강의실을 입력해주세요.');
            return false;
        }

        if (mbtiChk === false) {
            alert('MBTI를 입력해주세요.');
            return false;
        }

        if (birthChk === false) {
            alert('생년월일을 입력해주세요.');
            return false;
        }

        if (addressChk === false) {
            alert('주소를 입력해주세요.');
            return false;
        }

        if (getherChk === false) {
            alert('약관에 동의해주세요.');
            return false;
        }

        if (emconfirmchk === false) {
            alert('이메일 인증을 해주세요.');
            return false;
        }

    }
</script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.10/dist/sweetalert2.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="sweetalert2.min.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
</body>
</html>
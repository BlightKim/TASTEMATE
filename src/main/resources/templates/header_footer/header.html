<html lagn="ko" xmlns:th="http://www.thymeleaf.org">
  <!--headerFragment 선언-->
  <div th:fragment="headerFragment">
    <!DOCTYPE html>
    <html lang="ko">
      <head>
        <!-- 구글 글씨체 적용 -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@600&display=swap" rel="stylesheet" />

        <!-- Required meta tags -->
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- jQuery -->
        <script src="https://code.jquery.com/jquery-latest.min.js"></script>

        <!-- Popper.js -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>

        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

        <!-- Bootstrap JS -->
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

        <!-- Bootstrap Icons -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />

        <!-- 서머노트 -->
        <link href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-bs4.min.css" rel="stylesheet" />

        <!-- Bootstrap Bundle JS (includes Popper.js) -->
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js" integrity="sha384-SKL2xv0G6AFO7F8e1Cz7ph8ZK4jgDRBy6XUFt3JWkFJGz+iIgkTGXPKIyyX4mowf" crossorigin="anonymous"></script>

        <script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>

        <!-- Header JS -->
        <script type="text/javascript" src="/js/header/header.js"></script>

        <style>
          body {
            margin: 0;
            padding: 0;
            font-family: "Noto Serif KR", serif;
          }

          .header {
            background-color: #ffffff; /* 흰색 배경 */
            color: #601599; /* 글씨 색상 */
            padding: 20px;
            display: flex;
            justify-content: space-between; /* 가운데 정렬을 위한 스타일 */
            align-items: center; /* 가운데 정렬을 위한 스타일 */
          }

          .header__logo {
            font-size: 24px;
            font-weight: bold;
            margin: 0;
            width: 120px;
          }

          .header__navigation {
            list-style-type: none;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center; /* 가운데 정렬을 위한 스타일 */
            align-items: center; /* 가운데 정렬을 위한 스타일 */
          }

          .header__navigation li {
            margin-right: 20px;
          }

          .header__navigation li:last-child {
            margin-right: 0;
          }

          .header__navigation a {
            color: #9c91b3;
            text-decoration: none;
            font-size: 16px;
            font-weight: bold;
          }

          .fs13 {
            font-size: 13px;
          }
        </style>

        <title>TasteMate</title>
      </head>

      <body>

        <header class="header">
          <div id="toast">

          </div>
          <!--        <h1 class="header__logo">TasteMate</h1>-->
          <div>
            <img th:src="@{/img/headerLogo.png}" class="header__logo" />
            <!--        <img th:src="@{/img/헤더용로고_보라_2단.png}" class="header__logo"/>-->
          </div>

          <ul class="header__navigation">
            <li><a href="/store/list">맛집</a></li>
            <th:block th:if="${session.vo != null }">
              <li>
                <a
                  th:href="@{../class/get(userClass=${session.vo.getUserClass()})}"
                  >내강의장</a
                >
              </li>
            </th:block>
            <th:block th:if="${session.vo == null}">
              <li>
                <a href="#" onclick="javascript:notLogined(); return false;"
                  >내강의장</a
                >
              </li>
            </th:block>
            <div th:if="${@webSessionListener.currentUserList() != null}">
              <div class="dropdown" th:if="${session.vo != null}">
                <button class="btn btn-primary dropdown-toggle" type="button" id="showCurrentUsers"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  현재 접속한 사람
                </button>
                <ul class="dropdown-menu" aria-labelledby="showCurrentUsers">
                  <th:block th:each="user : ${@webSessionListener.currentUserList()}"
                            th:if="${!session.vo.userId.equals(user.userId)}">
                    <span th:text="${user.toString()}"></span>
                    <li class="dropdown-item">
                      <a class="chat-btn dropdown-item"
                         href="#"
                         th:data-sender="${session.vo.userId}"
                         th:data-receiver="${user.userId}">
                        <!-- Add any additional attributes or content for the chat button -->
                        <span th:text="${user.userId}"></span>
                      </a>
                    </li>
                  </th:block>
                </ul>
              </div>
            </div>
            <li><a href="#" th:href="@{/board}">꿀팁</a></li>
            <li><a href="#">관리자모드</a></li>
            <li><a href="#">MY</a></li>
            <div class="ml-auto">
              <button class="btn btn-outline-dark ml-2" type="button">
                회원가입
              </button>
              <button
                th:onclick="|location.href='@{/member/login}'|"
                class="btn btn-outline-dark ml-2"
                type="button"
              >
                로그인
              </button>
            </div>
          </ul>
        </header>
        <!-- 서머노트 스크립트-->

        <script th:inline="javascript" th:if="${session.vo != null}">
          /*<![CDATA[*/
          var socket = null;
          var serverURL = 'ws://localhost:8080/ws/echo'; // 백엔드의 엔드포인트 경로와 동일하게 설정해야 합니다.

          socket = new WebSocket(serverURL);

          socket.onopen = function() {
            console.log("WebSocket connection opened");
          };
          socket.onmessage = function(event) {
            console.log("WebSocket message received: ", event.data);
          };
          socket.onclose = function() {
            console.log("WebSocket connection closed");
          };
          socket.onerror = function(error) {
            console.log("WebSocket error occurred: ", error);
          };
          /*]]>*/
        </script>
      </body>
    </html>
  </div>
</html>
